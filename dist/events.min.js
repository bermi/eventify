// events - v0.0.1 (2012-05-17)
// -----------------
// Copyright(c) 2010-2012 Jeremy Ashkenas, DocumentCloud
// Copyright(c) 2012 Bermi Ferrer <bermi@bermilabs.com>
// MIT Licensed

(function(a){"use strict";var b,c=a.Events,d=a._||require("underscore"),e=/\s+/,f=function(a){return this};f.prototype={noConflict:function(){return a.Events=c,this},on:function(a,b,c){var d,f,g;if(!b)return this;a=a.split(e),d=this._callbacks||(this._callbacks={}),f=a.shift();while(f)g=d[f]||(d[f]=[]),g.push(b,c),f=a.shift();return this},off:function(a,b,c){var f,g,h,i;if(!(g=this._callbacks))return this;if(!(a||b||c))return delete this._callbacks,this;a=a?a.split(e):d.keys(g),f=a.shift();while(f){if(!(h=g[f])||!b&&!c){delete g[f],f=a.shift();continue}for(i=h.length-2;i>=0;i-=2)b&&h[i]!==b||c&&h[i+1]!==c||h.splice(i,2);f=a.shift()}return this},trigger:function(a){var b,c,d,f,g,h,i,j;if(!(c=this._callbacks))return this;j=[],a=a.split(e);for(f=1,g=arguments.length;f<g;f=f+1)j[f-1]=arguments[f];b=a.shift();while(b){i=c.all,i&&(i=i.slice()),d=c[b],d&&(d=d.slice());if(d)for(f=0,g=d.length;f<g;f+=2)d[f].apply(d[f+1]||this,j);if(i){h=[b].concat(j);for(f=0,g=i.length;f<g;f+=2)i[f].apply(i[f+1]||this,h)}b=a.shift()}return this}},b=new f,(typeof exports!="undefined"?exports:a).Events=new f,typeof exports!="undefined"&&typeof module!="undefined"&&module.exports&&(module.exports=new f)})(this);